/** libs/core/persistence/prisma/schema.prisma */

generator client {
  provider = "prisma-client-js"
  // NIVELACIÃ“N: Eliminamos el 'output' personalizado para permitir que Prisma 7
  // gestione el proxy de tipos de forma nativa en node_modules.
}

datasource db {
  provider = "postgresql"
}

model Tenant {
  id               String   @id @default(uuid())
  organizationName String
  urlSlug          String   @unique
  status           String   @default("ACTIVE")
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@map("tenants")
}

model SupportThread {
  id             String   @id @default(uuid())
  externalUserId String
  tenantId       String
  content        String
  channel        String
  metadata       Json     @default("{}")
  createdAt      DateTime @default(now())

  @@map("support_threads")
}
